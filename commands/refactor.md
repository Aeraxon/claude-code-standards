Refactor $ARGUMENTS following these principles:

1. Analyze current code structure
2. Identify improvement opportunities:
   - Code duplication
   - Complex functions (split into smaller)
   - Poor naming
   - Missing abstractions
   - Performance issues
3. Propose refactoring plan
4. Wait for approval
5. Implement changes maintaining functionality
6. Ensure tests still pass
